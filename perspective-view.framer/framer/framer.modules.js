require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"perspective-view":[function(require,module,exports){
// Generated by CoffeeScript 1.9.1
exports.Perspective = (function() {
  var activated, allLayers, animationCurve, device, screen;

  function Perspective() {}

  animationCurve = "spring(120, 20, 0, 0.07)";

  activated = false;

  screen = Framer.Device.screen;

  device = Framer.Device.phone;

  allLayers = null;

  Perspective.prototype.togglePerspective = function(verticalSeparation, temporalOpacity) {
    var i, j, layer, len, len1, ref, ref1, results, rotationNegative;
    if (verticalSeparation == null) {
      verticalSeparation = 40;
    }
    if (temporalOpacity == null) {
      temporalOpacity = 0.8;
    }
    allLayers = Framer.CurrentContext.getLayers();
    if (!activated && !this._childrenAnimating(screen.children)) {
      activated = true;
      screen.clip = false;
      this._setAllLayersAsChildrenOf(screen);
      device.originalProps = device.props;
      device.animate({
        properties: {
          rotationZ: 45,
          rotationX: 45,
          scaleY: 0.86062,
          y: verticalSeparation * (allLayers.length / 3.4)
        },
        curve: animationCurve
      });
      ref = screen.children;
      results = [];
      for (i = 0, len = ref.length; i < len; i++) {
        layer = ref[i];
        layer.originalProps = layer.props;
        results.push(layer.animate({
          properties: {
            z: verticalSeparation * (layer.index - 1),
            opacity: temporalOpacity
          },
          delay: (allLayers.length - layer.index) / allLayers.length,
          curve: animationCurve
        }));
      }
      return results;
    } else if (activated && !this._childrenAnimating(screen.children)) {
      activated = false;
      rotationNegative = device.rotationZ < 0;
      if (Math.abs(device.rotationZ) > 180) {
        device.originalProps.rotationZ = rotationNegative ? -360 : 360;
      } else {
        device.originalProps.rotationZ = rotationNegative ? -0 : 0;
      }
      device.animate({
        properties: device.originalProps,
        curve: animationCurve
      });
      ref1 = screen.children;
      for (j = 0, len1 = ref1.length; j < len1; j++) {
        layer = ref1[j];
        if (screen.children.indexOf(layer) !== 0) {
          layer.animate({
            properties: layer.originalProps,
            curve: animationCurve
          });
        }
      }
      return device.once(Events.AnimationEnd, function() {
        var k, len2, ref2, results1;
        screen.clip = true;
        ref2 = screen.children;
        results1 = [];
        for (k = 0, len2 = ref2.length; k < len2; k++) {
          layer = ref2[k];
          if (screen.children.indexOf(layer) !== 0) {
            results1.push(layer.parent = null);
          }
        }
        return results1;
      });
    }
  };

  Perspective.prototype._setAllLayersAsChildrenOf = function(parent) {
    var i, layer, len, results;
    results = [];
    for (i = 0, len = allLayers.length; i < len; i++) {
      layer = allLayers[i];
      if (layer.parent === null) {
        results.push(parent.addSubLayer(layer));
      }
    }
    return results;
  };

  Perspective.prototype._childrenAnimating = function(layersArray) {
    return _.some(layersArray, function(layer) {
      return layer.isAnimating;
    });
  };

  return Perspective;

})();

},{}],"perspective-view":[function(require,module,exports){
exports.Perspective = (function() {
  var activated, allLayers, animationCurve, device, screen;

  function Perspective() {}

  animationCurve = "spring(120, 20, 0, 0.07)";

  activated = false;

  screen = Framer.Device.screen;

  device = Framer.Device.phone;

  allLayers = null;

  Perspective.prototype.togglePerspective = function(verticalSeparation, temporalOpacity) {
    var i, j, layer, len, len1, ref, ref1, results, rotationNegative;
    if (verticalSeparation == null) {
      verticalSeparation = 40;
    }
    if (temporalOpacity == null) {
      temporalOpacity = 0.8;
    }
    allLayers = Framer.CurrentContext.getLayers();
    if (!activated && !this._childrenAnimating(screen.children)) {
      activated = true;
      screen.clip = false;
      this._setAllLayersAsChildrenOf(screen);
      device.originalProps = device.props;
      device.animate({
        properties: {
          rotationZ: 45,
          rotationX: 45,
          scaleY: 0.86062,
          y: verticalSeparation * (allLayers.length / 3.4)
        },
        curve: animationCurve
      });
      ref = screen.children;
      results = [];
      for (i = 0, len = ref.length; i < len; i++) {
        layer = ref[i];
        layer.originalProps = layer.props;
        results.push(layer.animate({
          properties: {
            z: verticalSeparation * (layer.index - 1),
            opacity: temporalOpacity
          },
          delay: (allLayers.length - layer.index) / allLayers.length,
          curve: animationCurve
        }));
      }
      return results;
    } else if (activated && !this._childrenAnimating(screen.children)) {
      activated = false;
      rotationNegative = device.rotationZ < 0;
      if (Math.abs(device.rotationZ) > 180) {
        device.originalProps.rotationZ = rotationNegative ? -360 : 360;
      } else {
        device.originalProps.rotationZ = rotationNegative ? -0 : 0;
      }
      device.animate({
        properties: device.originalProps,
        curve: animationCurve
      });
      ref1 = screen.children;
      for (j = 0, len1 = ref1.length; j < len1; j++) {
        layer = ref1[j];
        if (screen.children.indexOf(layer) !== 0) {
          layer.animate({
            properties: layer.originalProps,
            curve: animationCurve
          });
        }
      }
      return device.once(Events.AnimationEnd, function() {
        var k, len2, ref2, results1;
        screen.clip = true;
        ref2 = screen.children;
        results1 = [];
        for (k = 0, len2 = ref2.length; k < len2; k++) {
          layer = ref2[k];
          if (screen.children.indexOf(layer) !== 0) {
            results1.push(layer.parent = null);
          }
        }
        return results1;
      });
    }
  };

  Perspective.prototype._setAllLayersAsChildrenOf = function(parent) {
    var i, layer, len, results;
    results = [];
    for (i = 0, len = allLayers.length; i < len; i++) {
      layer = allLayers[i];
      if (layer.parent === null) {
        results.push(parent.addSubLayer(layer));
      }
    }
    return results;
  };

  Perspective.prototype._childrenAnimating = function(layersArray) {
    return _.some(layersArray, function(layer) {
      return layer.isAnimating;
    });
  };

  return Perspective;

})();


},{}]},{},[])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIuLi8uLi8uLi8uLi8uLi9Vc2Vycy9qb3NobXR1Y2tlci9EZXNrdG9wL3BlcnNwZWN0aXZlLXZpZXcvcGVyc3BlY3RpdmUtdmlldy5mcmFtZXIvbW9kdWxlcy9wZXJzcGVjdGl2ZS12aWV3LmpzIiwiL1VzZXJzL2pvc2htdHVja2VyL0Rlc2t0b3AvcGVyc3BlY3RpdmUtdmlldy9wZXJzcGVjdGl2ZS12aWV3LmZyYW1lci9tb2R1bGVzL3BlcnNwZWN0aXZlLXZpZXcuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pITSxPQUFPLENBQUM7QUFDYixN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LFFBQUE7QUFBQTtTQUFBLDJDQUFBOztVQUE0QixLQUFLLENBQUMsTUFBTixLQUFnQjtxQkFDM0MsTUFBTSxDQUFDLFdBQVAsQ0FBbUIsS0FBbkI7O0FBREQ7O0VBRDBCOzt3QkFJM0Isa0JBQUEsR0FBb0IsU0FBQyxXQUFEO1dBQ25CLENBQUMsQ0FBQyxJQUFGLENBQU8sV0FBUCxFQUFvQixTQUFDLEtBQUQ7YUFBVyxLQUFLLENBQUM7SUFBakIsQ0FBcEI7RUFEbUIiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjkuMVxuZXhwb3J0cy5QZXJzcGVjdGl2ZSA9IChmdW5jdGlvbigpIHtcbiAgdmFyIGFjdGl2YXRlZCwgYWxsTGF5ZXJzLCBhbmltYXRpb25DdXJ2ZSwgZGV2aWNlLCBzY3JlZW47XG5cbiAgZnVuY3Rpb24gUGVyc3BlY3RpdmUoKSB7fVxuXG4gIGFuaW1hdGlvbkN1cnZlID0gXCJzcHJpbmcoMTIwLCAyMCwgMCwgMC4wNylcIjtcblxuICBhY3RpdmF0ZWQgPSBmYWxzZTtcblxuICBzY3JlZW4gPSBGcmFtZXIuRGV2aWNlLnNjcmVlbjtcblxuICBkZXZpY2UgPSBGcmFtZXIuRGV2aWNlLnBob25lO1xuXG4gIGFsbExheWVycyA9IG51bGw7XG5cbiAgUGVyc3BlY3RpdmUucHJvdG90eXBlLnRvZ2dsZVBlcnNwZWN0aXZlID0gZnVuY3Rpb24odmVydGljYWxTZXBhcmF0aW9uLCB0ZW1wb3JhbE9wYWNpdHkpIHtcbiAgICB2YXIgaSwgaiwgbGF5ZXIsIGxlbiwgbGVuMSwgcmVmLCByZWYxLCByZXN1bHRzLCByb3RhdGlvbk5lZ2F0aXZlO1xuICAgIGlmICh2ZXJ0aWNhbFNlcGFyYXRpb24gPT0gbnVsbCkge1xuICAgICAgdmVydGljYWxTZXBhcmF0aW9uID0gNDA7XG4gICAgfVxuICAgIGlmICh0ZW1wb3JhbE9wYWNpdHkgPT0gbnVsbCkge1xuICAgICAgdGVtcG9yYWxPcGFjaXR5ID0gMC44O1xuICAgIH1cbiAgICBhbGxMYXllcnMgPSBGcmFtZXIuQ3VycmVudENvbnRleHQuZ2V0TGF5ZXJzKCk7XG4gICAgaWYgKCFhY3RpdmF0ZWQgJiYgIXRoaXMuX2NoaWxkcmVuQW5pbWF0aW5nKHNjcmVlbi5jaGlsZHJlbikpIHtcbiAgICAgIGFjdGl2YXRlZCA9IHRydWU7XG4gICAgICBzY3JlZW4uY2xpcCA9IGZhbHNlO1xuICAgICAgdGhpcy5fc2V0QWxsTGF5ZXJzQXNDaGlsZHJlbk9mKHNjcmVlbik7XG4gICAgICBkZXZpY2Uub3JpZ2luYWxQcm9wcyA9IGRldmljZS5wcm9wcztcbiAgICAgIGRldmljZS5hbmltYXRlKHtcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIHJvdGF0aW9uWjogNDUsXG4gICAgICAgICAgcm90YXRpb25YOiA0NSxcbiAgICAgICAgICBzY2FsZVk6IDAuODYwNjIsXG4gICAgICAgICAgeTogdmVydGljYWxTZXBhcmF0aW9uICogKGFsbExheWVycy5sZW5ndGggLyAzLjQpXG4gICAgICAgIH0sXG4gICAgICAgIGN1cnZlOiBhbmltYXRpb25DdXJ2ZVxuICAgICAgfSk7XG4gICAgICByZWYgPSBzY3JlZW4uY2hpbGRyZW47XG4gICAgICByZXN1bHRzID0gW107XG4gICAgICBmb3IgKGkgPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgbGF5ZXIgPSByZWZbaV07XG4gICAgICAgIGxheWVyLm9yaWdpbmFsUHJvcHMgPSBsYXllci5wcm9wcztcbiAgICAgICAgcmVzdWx0cy5wdXNoKGxheWVyLmFuaW1hdGUoe1xuICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgIHo6IHZlcnRpY2FsU2VwYXJhdGlvbiAqIChsYXllci5pbmRleCAtIDEpLFxuICAgICAgICAgICAgb3BhY2l0eTogdGVtcG9yYWxPcGFjaXR5XG4gICAgICAgICAgfSxcbiAgICAgICAgICBkZWxheTogKGFsbExheWVycy5sZW5ndGggLSBsYXllci5pbmRleCkgLyBhbGxMYXllcnMubGVuZ3RoLFxuICAgICAgICAgIGN1cnZlOiBhbmltYXRpb25DdXJ2ZVxuICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9IGVsc2UgaWYgKGFjdGl2YXRlZCAmJiAhdGhpcy5fY2hpbGRyZW5BbmltYXRpbmcoc2NyZWVuLmNoaWxkcmVuKSkge1xuICAgICAgYWN0aXZhdGVkID0gZmFsc2U7XG4gICAgICByb3RhdGlvbk5lZ2F0aXZlID0gZGV2aWNlLnJvdGF0aW9uWiA8IDA7XG4gICAgICBpZiAoTWF0aC5hYnMoZGV2aWNlLnJvdGF0aW9uWikgPiAxODApIHtcbiAgICAgICAgZGV2aWNlLm9yaWdpbmFsUHJvcHMucm90YXRpb25aID0gcm90YXRpb25OZWdhdGl2ZSA/IC0zNjAgOiAzNjA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZXZpY2Uub3JpZ2luYWxQcm9wcy5yb3RhdGlvblogPSByb3RhdGlvbk5lZ2F0aXZlID8gLTAgOiAwO1xuICAgICAgfVxuICAgICAgZGV2aWNlLmFuaW1hdGUoe1xuICAgICAgICBwcm9wZXJ0aWVzOiBkZXZpY2Uub3JpZ2luYWxQcm9wcyxcbiAgICAgICAgY3VydmU6IGFuaW1hdGlvbkN1cnZlXG4gICAgICB9KTtcbiAgICAgIHJlZjEgPSBzY3JlZW4uY2hpbGRyZW47XG4gICAgICBmb3IgKGogPSAwLCBsZW4xID0gcmVmMS5sZW5ndGg7IGogPCBsZW4xOyBqKyspIHtcbiAgICAgICAgbGF5ZXIgPSByZWYxW2pdO1xuICAgICAgICBpZiAoc2NyZWVuLmNoaWxkcmVuLmluZGV4T2YobGF5ZXIpICE9PSAwKSB7XG4gICAgICAgICAgbGF5ZXIuYW5pbWF0ZSh7XG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiBsYXllci5vcmlnaW5hbFByb3BzLFxuICAgICAgICAgICAgY3VydmU6IGFuaW1hdGlvbkN1cnZlXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBkZXZpY2Uub25jZShFdmVudHMuQW5pbWF0aW9uRW5kLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGssIGxlbjIsIHJlZjIsIHJlc3VsdHMxO1xuICAgICAgICBzY3JlZW4uY2xpcCA9IHRydWU7XG4gICAgICAgIHJlZjIgPSBzY3JlZW4uY2hpbGRyZW47XG4gICAgICAgIHJlc3VsdHMxID0gW107XG4gICAgICAgIGZvciAoayA9IDAsIGxlbjIgPSByZWYyLmxlbmd0aDsgayA8IGxlbjI7IGsrKykge1xuICAgICAgICAgIGxheWVyID0gcmVmMltrXTtcbiAgICAgICAgICBpZiAoc2NyZWVuLmNoaWxkcmVuLmluZGV4T2YobGF5ZXIpICE9PSAwKSB7XG4gICAgICAgICAgICByZXN1bHRzMS5wdXNoKGxheWVyLnBhcmVudCA9IG51bGwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0czE7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgUGVyc3BlY3RpdmUucHJvdG90eXBlLl9zZXRBbGxMYXllcnNBc0NoaWxkcmVuT2YgPSBmdW5jdGlvbihwYXJlbnQpIHtcbiAgICB2YXIgaSwgbGF5ZXIsIGxlbiwgcmVzdWx0cztcbiAgICByZXN1bHRzID0gW107XG4gICAgZm9yIChpID0gMCwgbGVuID0gYWxsTGF5ZXJzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBsYXllciA9IGFsbExheWVyc1tpXTtcbiAgICAgIGlmIChsYXllci5wYXJlbnQgPT09IG51bGwpIHtcbiAgICAgICAgcmVzdWx0cy5wdXNoKHBhcmVudC5hZGRTdWJMYXllcihsYXllcikpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfTtcblxuICBQZXJzcGVjdGl2ZS5wcm90b3R5cGUuX2NoaWxkcmVuQW5pbWF0aW5nID0gZnVuY3Rpb24obGF5ZXJzQXJyYXkpIHtcbiAgICByZXR1cm4gXy5zb21lKGxheWVyc0FycmF5LCBmdW5jdGlvbihsYXllcikge1xuICAgICAgcmV0dXJuIGxheWVyLmlzQW5pbWF0aW5nO1xuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiBQZXJzcGVjdGl2ZTtcblxufSkoKTtcbiIsImNsYXNzIGV4cG9ydHMuUGVyc3BlY3RpdmUgXG5cdGFuaW1hdGlvbkN1cnZlID0gXCJzcHJpbmcoMTIwLCAyMCwgMCwgMC4wNylcIlxuXHRhY3RpdmF0ZWQgPSBmYWxzZVxuXG5cdHNjcmVlbiA9IEZyYW1lci5EZXZpY2Uuc2NyZWVuXG5cdGRldmljZSA9IEZyYW1lci5EZXZpY2UucGhvbmVcblx0YWxsTGF5ZXJzID0gbnVsbFxuXG5cdHRvZ2dsZVBlcnNwZWN0aXZlOiAodmVydGljYWxTZXBhcmF0aW9uID0gNDAsIHRlbXBvcmFsT3BhY2l0eSA9IDAuOCkgLT5cblx0XHRhbGxMYXllcnMgPSBGcmFtZXIuQ3VycmVudENvbnRleHQuZ2V0TGF5ZXJzKClcblxuXHRcdGlmIG5vdCBhY3RpdmF0ZWQgYW5kIG5vdCBAX2NoaWxkcmVuQW5pbWF0aW5nKHNjcmVlbi5jaGlsZHJlbilcblx0XHRcdGFjdGl2YXRlZCA9IHRydWVcblx0XHRcdHNjcmVlbi5jbGlwID0gZmFsc2VcblxuXHRcdFx0QF9zZXRBbGxMYXllcnNBc0NoaWxkcmVuT2Yoc2NyZWVuKVxuXG5cdFx0XHRkZXZpY2Uub3JpZ2luYWxQcm9wcyA9IGRldmljZS5wcm9wc1xuXHRcdFx0ZGV2aWNlLmFuaW1hdGVcblx0XHRcdFx0cHJvcGVydGllczpcblx0XHRcdFx0XHRyb3RhdGlvblo6IDQ1XG5cdFx0XHRcdFx0cm90YXRpb25YOiA0NVxuXHRcdFx0XHRcdHNjYWxlWTogMC44NjA2MlxuXHRcdFx0XHRcdHk6IHZlcnRpY2FsU2VwYXJhdGlvbiAqIChhbGxMYXllcnMubGVuZ3RoIC8gMy40KVxuXHRcdFx0XHRjdXJ2ZTogYW5pbWF0aW9uQ3VydmVcblxuXHRcdFx0Zm9yIGxheWVyIGluIHNjcmVlbi5jaGlsZHJlblxuXHRcdFx0XHRsYXllci5vcmlnaW5hbFByb3BzID0gbGF5ZXIucHJvcHNcblxuXHRcdFx0XHRsYXllci5hbmltYXRlXG5cdFx0XHRcdFx0cHJvcGVydGllczpcblx0XHRcdFx0XHRcdHo6IHZlcnRpY2FsU2VwYXJhdGlvbiAqIChsYXllci5pbmRleCAtIDEpXG5cdFx0XHRcdFx0XHRvcGFjaXR5OiB0ZW1wb3JhbE9wYWNpdHlcblx0XHRcdFx0XHRkZWxheTogKGFsbExheWVycy5sZW5ndGggLSBsYXllci5pbmRleCkgLyBhbGxMYXllcnMubGVuZ3RoXG5cdFx0XHRcdFx0Y3VydmU6IGFuaW1hdGlvbkN1cnZlXG5cblx0XHRlbHNlIGlmIGFjdGl2YXRlZCBhbmQgbm90IEBfY2hpbGRyZW5BbmltYXRpbmcoc2NyZWVuLmNoaWxkcmVuKVxuXHRcdFx0YWN0aXZhdGVkID0gZmFsc2VcblxuXHRcdFx0cm90YXRpb25OZWdhdGl2ZSA9IGRldmljZS5yb3RhdGlvblogPCAwXG5cblx0XHRcdGlmIE1hdGguYWJzKGRldmljZS5yb3RhdGlvblopID4gMTgwXG5cdFx0XHRcdGRldmljZS5vcmlnaW5hbFByb3BzLnJvdGF0aW9uWiA9IGlmIHJvdGF0aW9uTmVnYXRpdmUgdGhlbiAtMzYwIGVsc2UgMzYwXG5cdFx0XHRlbHNlXG5cdFx0XHRcdGRldmljZS5vcmlnaW5hbFByb3BzLnJvdGF0aW9uWiA9IGlmIHJvdGF0aW9uTmVnYXRpdmUgdGhlbiAtMCBlbHNlIDBcblxuXHRcdFx0ZGV2aWNlLmFuaW1hdGVcblx0XHRcdFx0cHJvcGVydGllczogZGV2aWNlLm9yaWdpbmFsUHJvcHNcblx0XHRcdFx0Y3VydmU6IGFuaW1hdGlvbkN1cnZlXG5cblx0XHRcdGZvciBsYXllciBpbiBzY3JlZW4uY2hpbGRyZW4gd2hlbiBzY3JlZW4uY2hpbGRyZW4uaW5kZXhPZihsYXllcikgaXNudCAwXG5cdFx0XHRcdGxheWVyLmFuaW1hdGVcblx0XHRcdFx0XHRwcm9wZXJ0aWVzOiBsYXllci5vcmlnaW5hbFByb3BzXG5cdFx0XHRcdFx0Y3VydmU6IGFuaW1hdGlvbkN1cnZlXG5cblx0XHRcdGRldmljZS5vbmNlIEV2ZW50cy5BbmltYXRpb25FbmQsIC0+XG5cdFx0XHRcdHNjcmVlbi5jbGlwID0gdHJ1ZVxuXHRcdFx0XHRsYXllci5wYXJlbnQgPSBudWxsIGZvciBsYXllciBpbiBzY3JlZW4uY2hpbGRyZW4gd2hlbiBzY3JlZW4uY2hpbGRyZW4uaW5kZXhPZihsYXllcikgaXNudCAwXG5cblx0X3NldEFsbExheWVyc0FzQ2hpbGRyZW5PZjogKHBhcmVudCkgLT5cblx0XHRmb3IgbGF5ZXIgaW4gYWxsTGF5ZXJzIHdoZW4gbGF5ZXIucGFyZW50IGlzIG51bGxcblx0XHRcdHBhcmVudC5hZGRTdWJMYXllcihsYXllcilcblxuXHRfY2hpbGRyZW5BbmltYXRpbmc6IChsYXllcnNBcnJheSkgLT5cblx0XHRfLnNvbWUgbGF5ZXJzQXJyYXksIChsYXllcikgLT4gbGF5ZXIuaXNBbmltYXRpbmciXX0=
